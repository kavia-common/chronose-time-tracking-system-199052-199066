{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React hook and context for managing the state of a timesheet component, including date calculations, state management via reducer, and context provision for components to access and modify timesheet data.", "external_files": ["react"], "external_methods": ["React.createContext", "React.useContext", "React.useEffect", "React.useMemo", "React.useReducer"], "published": ["TimesheetProvider", "useTimesheet"], "classes": [], "methods": [{"name": "startOfWeek", "description": "Calculates the start date of the week for a given date, making Monday the first day."}, {"name": "endOfWeek", "description": "Calculates the end date of the week for a given date, setting time to end of the day."}, {"name": "formatRange", "description": "Formats a date range into a string with abbreviated month and day."}, {"name": "dayKey", "description": "Returns an ISO string date (YYYY-MM-DD) from a Date object, used as a key."}, {"name": "initial", "description": "Provides the initial state of the timesheet, including current week start and drafts from localStorage."}, {"name": "reducer(state, action)", "description": "Handles various state updates for the timesheet, including view, date, form, drafts, entries, and status.", "scope": "", "scopeKind": ""}, {"name": "TimesheetProvider({ children })", "description": "React context provider component that supplies the timesheet state and actions to children components.", "scope": "", "scopeKind": ""}, {"name": "useTimesheet()", "description": "Custom hook to consume the timesheet context with access to state and actions.", "scope": "", "scopeKind": ""}], "calls": ["createContext", "useContext", "useMemo", "useReducer", "localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "Date", "parseFloat", "append", "reduce", "filter"], "search-terms": ["useTimesheet", "TimesheetProvider", "localStorage", "weekStart", "drafts", "entries", "date range", "time tracking", "React context"], "state": 2, "file_id": 24, "knowledge_revision": 67, "git_revision": "02f7a5def8c77bd468d935445c1170cf8c95b63a", "revision_history": [{"49": ""}, {"67": "02f7a5def8c77bd468d935445c1170cf8c95b63a"}], "ctags": [{"_type": "tag", "name": "TimesheetContext", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^const TimesheetContext = createContext(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TimesheetProvider", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^export function TimesheetProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const d = new Date(date);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "day", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const day = d.getDay(); \\/\\/ 0 Sun ... 6 Sat$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "dayKey", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^const dayKey = (d) => d.toISOString().slice(0, 10);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "diff", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const diff = (day + 6) % 7; \\/\\/ make Monday the start$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const e = new Date(s);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "endOfWeek", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^const endOfWeek = (date) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fmt", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const fmt = (d) =>$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "formatRange", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^const formatRange = (start, end) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "initial", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^const initial = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "reducer", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^function reducer(state, action) {$/", "language": "JavaScript", "kind": "function", "signature": "(state, action)"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const s = startOfWeek(date);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const s = startOfWeek(today);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setView", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^    setView,$/", "language": "JavaScript", "kind": "field", "scope": "TimesheetProvider.value", "scopeKind": "class"}, {"_type": "tag", "name": "startOfWeek", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^const startOfWeek = (date) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "storedDrafts", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const storedDrafts = JSON.parse(localStorage.getItem(\"chronose:ts:drafts\") || \"[]\");$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "today", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const today = new Date();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "useTimesheet", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^export function useTimesheet() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  const value = {$/", "language": "JavaScript", "kind": "class", "scope": "TimesheetProvider", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^  return <TimesheetContext.Provider value={value}>{children}<\\/TimesheetContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "view", "path": "/home/kavia/workspace/code-generation/chronose-time-tracking-system-199052-199066/chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "pattern": "/^    view: state.view,$/", "language": "JavaScript", "kind": "property", "scope": "TimesheetProvider.value", "scopeKind": "class"}], "hash": "cee1fa51a045519e1180075b198d42ac", "format-version": 4, "code-base-name": "chronose_frontend", "filename": "chronose_frontend/src/pages/Timesheet/state/useTimesheetState.js", "fields": [{"name": "setView,", "scope": "TimesheetProvider.value", "scopeKind": "class", "description": "unavailable"}, {"name": "return <TimesheetContext.Provider value={value}>{children}<\\/TimesheetContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}, {"name": "view: state.view,", "scope": "TimesheetProvider.value", "scopeKind": "class", "description": "unavailable"}]}